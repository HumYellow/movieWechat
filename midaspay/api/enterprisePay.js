module.exports=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1),o=n(3);t.exports=o.fn.extend({getVersion:function(){return"1.3.1"}},i,{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isEnterprise=!0,i.init(t)}})},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t)}var o=n(2),r=n(4),s=n(3);s.inherits(i,o),s.fn.extend(i.prototype,{launchPay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(!r._super.hasContext()){o.prototype.launchPay.call(this,t,e);var n=this.callTime=Date.now();this.app=new r({params:t,opt:this.opt,callback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(i.instance.destroy(),i.instance=null),this.callTime==n&&e(t)}.bind(this)})}}}),i.instance=null,t.exports={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=i.instance?i.instance:i.instance=new i(t)},get:function(){if(!i.instance)throw Error("goods not initalize");return i.instance},destroy:function(){i.instance.destroy(),i.instance=null}}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=t,this.params=null,this.callback=null,this.app=null}var o=n(3);o.fn.extend(i.prototype,{launchPay:function(t,e){if(this.params=t,!o.lang.isFunction(e))throw Error("callback must be a function");this.callback=e},destroy:function(){try{this.app&&this.app.destroy&&(this.app.destroy(),this.app=null),this.callback=null}catch(t){}}}),t.exports=i},function(t,e){"use strict";var n=t.exports;n.fn={getParams:function(t){if(!t)return{};var e=t.replace(/.+?\?/,"").replace(/#.*/,"").split("&"),n={};for(var i in e){var o=e[i].split("=");2===o.length&&(n[o[0]]=o[1])}return n},each:function(t,e){var i,o=0,r=t.length;if(void 0===r&&n.lang.isObject(t)){for(var s in t)if(!1===e.call(t[s],t[s],s,t))break}else for(i=t[0];o<r&&!1!==e.call(i,i,o,t);i=t[++o]);return t},extend:function(t){for(var e=1;e<=arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t},formatFloat:function(t,e,n,i){return i=~~i?~~i:e+1,intNumber=Math.round(t*Math.pow(10,i)),Math[n](intNumber/Math.pow(10,i-e))/Math.pow(10,e)},uuid:function(t,e){var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=i,r=[];if(e=e||o.length,t)for(n=0;n<t;n++)r[n]=o[0|Math.random()*e];else{var s;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(s=0|16*Math.random(),r[n]=o[19==n?3&s|8:s])}return r.join("")},emptyFun:function(){}},n.lang={is:function(t,e){var n=Object.prototype.toString.call(e).slice(8,-1);return void 0!==e&&null!==e&&n===t},isNumber:function(t){return this.is("Number",t)},isString:function(t){return this.is("String",t)},isFunction:function(t){return this.is("Function",t)},isObject:function(t){return this.is("Object",t)},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isWindow:function(t){return null!=t&&t==t.window},isPlainObject:function(t){return n.lang.isObject(t)&&!n.lang.isWindow(t)&&Object.getPrototypeOf(t)==Object.prototype},isArray:function(t){return this.is("Array",t)}},n.req={serializeParam:function(t){if(!t)return"";var e=[];for(var n in t)void 0===t[n]&&null==t[n]||e.push(n+"="+t[n]);return e.join("&")}},n.string={escHTML:function(t,e){var n=["&","&amp;","<","&lt;",">","&gt;"," ","&nbsp;",'"',"&quot;","'","&#39;","\\r","<br>","\\n","<br>"];e&&n.reverse();for(var i=0,o=t;i<n.length;i+=2)o=o.replace(new RegExp(n[i],"g"),n[1+i]);return o},tmpl:function(t,e){return"string"==typeof t?t.replace(/\$([a-zA-Z0-9_\.]*)\$/g,function(t,i){if(-1!==i.indexOf(".")){i=i.split(/\./g);var o=e;return n.fn.each(i,function(t){o=o[t]}),o||""}return void 0!==e[i]?e[i]:""}):t}},n.tmpl=n.string.tmpl,n.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=e}},function(t,e,n){"use strict";function i(t){var e=this,n=t.params,i=void 0===n?{}:n,c=t.callback,p=void 0===c?function(){}:c,l=t.opt,h=void 0===l?{}:l;o.call(this,{params:i,callback:p,opt:h}),this.IFORMAT_PREFIX="midaswechatpay."+(this.isEnterprise()?"enterprise":"goods"),this.reportObj.setIformatPrefix(this.IFORMAT_PREFIX),this.payMod=new a(i);var d=this.payMod.checkGoodsParams();this.checkEnv(function(){d.status?(e.report("goodsinfo.pv"),e.payMod.getGoodsInfo(function(t){e.report("goodsinfo.status",{httpCode:t.httpCode||"200",resultMsg:t.msg},{resultCode:t.ret});var n=!1,i={ret:s.code.FAIL,msg:s.msg[s.code.FAIL]};if(~~t.ret)i.ret=t.ret,i.msg=t.msg||s.msg[s.code.FAIL];else if(t.info&&t.info.channel&&u.lang.isArray(t.info.channel))try{e.directPay(t.info.channel[0]&&t.info.channel[0].name)?n=!0:(i.ret=s.code.FAIL,i.msg=s.msg.CHANNEL_NOT_SUPPORT)}catch(t){i.ret=s.code.FAIL,i.msg=t.message||""}n||e.callback(new r(i).getResult())})):e.paramsError(d.msg)})}var o=n(5),r=n(11),s=n(9),a=n(14),u=n(3);u.inherits(i,o),u.fn.extend(i.prototype,{isEnterprise:function(){return this.opt.isEnterprise}}),t.exports=i},function(t,e,n){"use strict";function i(t){var e=t.params,n=t.callback,i=t.opt;if(this.params=e,this.opt=i,this.callback=n,this.env={},!s.lang.isFunction(this.callback))throw new Error("callback must be a function");this.payMod=null,r.setContext(this),s.fn.extend(this.params,{env:~~this.opt.env}),this.reportObj=new a,this.payStartTime=(new Date).getTime()}var o=n(6),r=n(8),s=n(3),a=n(13),u=n(9),c=n(11);i.hasContext=function(){return!!r.getContext()},s.fn.extend(i.prototype,{checkEnv:function(t){var e=this;wx.getSystemInfo({success:function(t){e.env=t||{}},complete:function(){s.lang.isFunction(t)&&t()}})},isEnterprise:function(){return!1},getPlatform:function(){var t=this.env;if(t.model){return t.model.indexOf("iPhone")>-1?"ios":"android"}return""},getVersion:function(){var t=this.env;return t?t.version||"":""},getPayStartTime:function(){return this.payStartTime},report:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.reportObj.send(t,e,{3:this.params.openid,37:this.params.session_id,43:this.params.session_type,41:this.params.login_wx_appid,26:this.params.pf,7:n.resultCode||0,19:this.params.service_code||"",24:this.params.appid||this.params.offer_id,50:this.getPlatform()+"_"+this.getVersion(),51:this.params.aid||""})},getPayMod:function(){return this.payMod},directPay:function(t){var e=this;return t&&o.hasOwnProperty(t)?(this.report("directpay",{channel:t}),o[t](null,function(t){try{var n=(new Date).getTime();e.report("payduration",{time:n-e.getPayStartTime()})}catch(t){}e.callback(t)}),!0):(this.report("directpay.nosupport",{channel:t}),!1)},getBizAppid:function(){return 1!=this.opt.use_default_wxappid?this.params.biz_appid||"1":this.payMod.getDefaultBizAppid()},paramsError:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";setTimeout(function(){t.callback(new c({ret:u.code.PARAMS_ERROR,msg:e||u.msg[u.code.FAIL]}).getResult())},0)},showPayLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{wx.showToast({title:"支付中...",icon:"loading",duration:1e3*t})}catch(t){}},hidePayLoading:function(){try{wx.hideToast()}catch(t){}},destroy:function(){r.destroyContext(),this.callback=null,this.reportObj.destroy(),this.reportObj=null,this.payMod=null}}),t.exports=i},function(t,e,n){"use strict";var i=n(7),o=n(12);t.exports={wechat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];new i(t,e)},wechatapp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];new o(t,e)}}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];a.call(this,t,e),this.buy(this.params)}var o=n(8),r=n(9),s=n(3),a=n(10);s.inherits(i,a),s.fn.extend(i.prototype,{buy:function(t){var e=this,n={biz_appid:o.getContext().getBizAppid(),wx_direct_pay:0,wx_publice_pay:1,pay_method:"wechat"};t=s.fn.extend({},n,t);var i=o.getContext().getPayMod();"1"==i.getPayParams().change_wx_openid&&(t.change_wx_openid="1"),i.save(t,function(n){return e.handlerBuy(n,t)})},getChannelName:function(){return"wechat"},handlerBuy:function(t,e){var n=this;if(~~t.ret)this.callback.call(null,this.constructResult(t));else{var i=t.wx_info,s=(i.wx_sign_url,i.wx_appid,i.wx_time),a=i.wx_noncenum,u=i.wx_package,c=i.wx_signtype||"SHA1",p=i.wx_sign,l=!1;o.getContext().report("wechatpay.start.pv"),wx.requestPayment({timeStamp:s,nonceStr:a,package:u,signType:c,paySign:p,complete:function(t){t.errMsg=t.errMsg||"";var e=t.errMsg.indexOf("cancel")>-1,i=l?r.code.SUCCESS:r.code.FAIL;!l&&e&&(i=r.code.CANCEL);var s=r.msg[i];o.getContext().report("wechatpay.status",{ret:i,channel:n.getChannelName()}),n.callback.call(null,n.constructResult({ret:i,msg:s}))},success:function(t){l=!0},fail:function(t){l=!1}})}}}),t.exports=i},function(t,e,n){"use strict";var i=null;t.exports={setContext:function(t){i=t},getContext:function(){return i},getVersion:function(){return"1.3.1"},destroyContext:function(){i=null}}},function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i,o=e.code={SUCCESS:0,FAIL:-1,CANCEL:-2,INTERFACENOTEXIST:-3,PARAMS_ERROR:1e3};e.msg=(i={},n(i,o.SUCCESS,"支付成功"),n(i,o.FAIL,"支付失败"),n(i,o.CANCEL,"支付取消"),n(i,o.PARAMS_ERROR,"参数错误"),n(i,o.INTERFACENOTEXIST,"接口不存在"),n(i,"CHANNEL_NOT_SUPPORT","渠道不支持"),i)},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(this.params=t,this.callback=e,!o.lang.isFunction(this.callback))throw new Error("callback must be a function")}var o=(n(8),n(3)),r=n(11);o.fn.extend(i.prototype,{buy:function(t){},handlerBuy:function(t){},getChannelName:function(){return""},constructResult:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new r(t);return o.fn.extend(e,{channel:this.getChannelName()}),n.setExtra(e),n.result}}),i.ResultAdapter=r,t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3),s=function(){function t(e){var n=e.ret,o=e.msg;i(this,t),this.result={resultCode:n,resultMsg:o}}return o(t,[{key:"setExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.fn.extend(this.result,t)}},{key:"getResult",value:function(){return this.result}}]),t}();t.exports=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(8),u=n(9),c=n(3),p=n(10),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return wx&&wx.requestVirtualPayment?r.buy(r.params):(a.getContext().report("requestVirtualPayment.notexist"),r.callback.call(null,r.constructResult({ret:u.code.INTERFACENOTEXIST,msg:u.msg[u.code.INTERFACENOTEXIST]}))),r}return r(e,t),s(e,[{key:"buy",value:function(t){var e=this,n=a.getContext().getPayMod();if(n.needCurrencyType(this.getChannelName()))return a.getContext().paramsError("需要currency_type参数");var i={currency_type:n.getCurrencyType(),pay_method:this.getChannelName()};t=c.fn.extend({},i,t),"1"==n.getPayParams().change_wx_openid&&(t.change_wx_openid="1"),n.save(t,function(n){return e.handlerBuy(n,t)})}},{key:"getChannelName",value:function(){return"wechatapp"}},{key:"handlerBuy",value:function(t,e){var n=this;if(!~~t.ret&&t.wechatapp_info){var i=!1,o="",r=t.wechatapp_info;if(wx&&wx.requestVirtualPayment){r.price_level,r.orderid,r.orderid,r.desc,r.sign;a.getContext().report("wechatapp_pay.start.pv"),wx.requestVirtualPayment({priceLevel:r.price_level,businessOrderId:r.orderid,outTradeNo:r.orderid,desc:r.desc||"",virtualPaySign:r.sign,complete:function(t){t.errMsg=t.errMsg||"";var e=(t.errMsg.indexOf("CANCEL"),i?u.code.SUCCESS:void 0!==t.errCode?t.errCode:u.code.FAIL),r=o||u.msg[e];a.getContext().report("wechatapp_pay.status",{ret:e,channel:n.getChannelName()}),n.callback.call(null,n.constructResult({ret:e,msg:r}))},success:function(t){i=!0},fail:function(t){i=!1,o=t&&t.errMsg}})}else a.getContext().report("requestVirtualPayment.notexist"),this.callback.call(null,this.constructResult({ret:u.code.INTERFACENOTEXIST,msg:u.msg[u.code.INTERFACENOTEXIST]}))}else this.callback.call(null,this.constructResult(t))}}]),e}(p);t.exports=l},function(t,e,n){"use strict";function i(){this.reportQueue=[],this.pid=0,this.iformatPrefix="",this.handleReportComplete=this.handleReportComplete.bind(this)}var o=n(3),r=n(8);o.fn.extend(i.prototype,{constructParams:function(t,e,n){var i={};o.fn.extend(i,{6:10,7:0,8:e?o.req.serializeParam(e):"",13:this.pid++,21:[this.iformatPrefix,t].join("."),31:"midas_wx_sdk_"+r.getVersion(),38:(new Date).getTime()}),o.fn.extend(i,n);var s=[];o.fn.each(i,function(t,e){s.push(e+"="+encodeURIComponent(t))});var a=[];return"https://api.unipay.qq.com/v1/900/15499/log_data?num=1&record0="+encodeURIComponent(s.join("|"))+a.join("")+"&rr"+Math.random()},doSend:function(){var t=this.reportQueue[0];wx.request({url:t,method:"GET",complete:this.handleReportComplete})},handleReportComplete:function(){this.reportQueue.shift(),this.reportQueue.length>0&&this.doSend()},send:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.constructParams(t,e,i);this.reportQueue.push(o),1==this.reportQueue.length&&setTimeout(function(){n.doSend()},0)},destroy:function(){},setIformatPrefix:function(t){this.iformatPrefix=t}}),t.exports=i},function(t,e,n){"use strict";function i(t){r.call(this,t),this.initCgi(),this.processType="bg",this.goodsInfo=null}var o=n(3),r=n(15),s=n(8);o.inherits(i,r),o.fn.extend(i.prototype,{getMid:function(){return(this.params.goodstokenurl||"").split("/")[2]},getTokenId:function(){return o.fn.getParams(this.params.goodstokenurl).token_id},getGoodsInfo:function(t){this.cgi.mobileGoodsInfo(o.fn.extend({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),params:this.params.goodstokenurl}),t)},getZoneid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).zoneid||this.params.zoneid||"1"},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n={token_id:this.getTokenId()};o.fn.extend(n,this.getSavePublicParams()),o.fn.extend(n,{zoneid:this.getZoneid(this.buyParams),buy_quantity:this.params.buy_quantity||""}),o.fn.extend(n,t),n._params=this.params.goodstokenurl,this.doSave(n,e)},doSave:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];s.getContext().report("startsave.pv"),this.cgi.mobileSaveGoods(t,function(t){s.getContext().report("savestatus",{httpCode:t.httpCode||"200",resultMsg:t.msg},{resultCode:t.ret}),e(t)},{method:"POST"})},checkGoodsParams:function(){var t=this,e={status:!0,msg:""},n=this.checkPublicParams();return n.status?(o.fn.each(["goodstokenurl","zoneid","pf"],function(n){if(!t.params[n])return e.status=!1,e.msg=n+"错误",!1;var i=t.params[n];"string"==typeof i&&(t.params[n]=i)}),e):n}}),t.exports=i},function(t,e,n){"use strict";function i(t){this.params=t,this.params.extend=t.extend||"",this.session=new o({openid:t.openid,openkey:t.openkey||"no_key",sessionid:t.session_id||"hy_gameid",sessiontype:t.session_type||"wc_actoken"}),this.processType="",this.cgi=null}var o=n(16),r=n(17),s=(n(9),n(3));n(8);s.fn.extend(i.prototype,{getPayParams:function(){return this.params},initCgi:function(){this.cgi=new r({pf:this.params.pf,pfkey:this.params.pfkey||"pfkey",appid:this.params.appid||this.params.offer_id,sandbox:~~this.params.env,sessionObj:this.session})},getInfoPublicParams:function(){var t={process_type:this.processType,page_type:"mall"};return this.params.login_wx_appid&&s.fn.extend(t,{wx_appid:this.params.login_wx_appid}),t},getSavePublicParams:function(){return{process_type:this.processType,page_type:"order",from_https:"1",from_h5:"1",extend:encodeURIComponent(this.params.extend||""),provide_uin:this.params.provide_uin||"",wx_appid:this.params.login_wx_appid||""}},getDefaultBizAppid:function(){return""},save:function(t,e){},checkPublicParams:function(){var t=this.params,e="",n={status:!0,msg:""};return s.fn.each(["offer_id","openid"],function(n){if(!t[n])return e=n+"错误",!1}),e&&(n.status=!1,n.msg=e),n},getCurrencyType:function(){return this.params.currency_type||""},needCurrencyType:function(){return"wechat_app"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&!this.params.currency_type}}),t.exports=i},function(t,e,n){"use strict";var i=n(3),o=t.exports=function(t){this.openid=t.openid,this.openkey=t.openkey,this.sessionid=t.sessionid,this.sessiontype=t.sessiontype,this.sessionToken=this.openid+(new Date).getTime()};i.fn.extend(o.prototype,{getSessionParam:function(){return{openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),session_id:encodeURIComponent(this.sessionid),session_type:encodeURIComponent(this.sessiontype)}},addSessionParam:function(t){return i.fn.addParam({openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),sessionid:encodeURIComponent(this.sessionid),sessiontype:encodeURIComponent(this.sessiontype)},t)},getUin:function(){return""}})},function(t,e,n){"use strict";var i,o=void 0,r=o=n(3),s=(n(18),t.exports=function(t){t=t||{},this.pf=t.pf||"html5",this.pfkey=t.pfkey||"pfkey",this.appid=t.appid,this.sandbox=~~t.sandbox,this.sessionObj=t.sessionObj||null,this.mid=t.mid||"r",this.domain="api.unipay.qq.com",1==this.sandbox?this.domain="sandbox.api.unipay.qq.com":2==this.sandbox&&(this.domain="dev.api.unipay.qq.com"),this.domainq=this.sandbox?"sandbox.api.unipay.qq.com":"q.unipay.qq.com",this.sessionToken=t.sessionToken||r.fn.uuid()+(new Date).getTime(),t.extend&&(this.extend=t.extend)});s.url={},s.url.mobileGoodsInfo={url:"$domain$$params$&",https:!0},s.url.mobileSaveGoods3={url:"$domain$$params$&",https:!0},s.url.wechatAppProc={url:"$domain$/v1/r/$appid$/wechatapp_proc?",https:!0},s.url.jiefenPayGoods={url:"https://m.jifen.qq.com/cgi-bin/pay_goods?",https:!0},s.isEnterprise=!1,s.prototype={setCrypto:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=t},setEnv:function(t){if(t&&this.sandbox)switch(this.env=t,t){case"dev":this.domain="dev.api.unipay.qq.com";break;case"sandbox":this.domain="sandbox.api.unipay.qq.com"}},restoreEnv:function(){this.sandbox&&this.setEnv("sandbox")},set isSandbox(t){this.sandbox=t,this.domain=this.sandbox?"sandbox.api.unipay.qq.com":"api.unipay.qq.com"},_getCgiUrl:function(t,e,n){e=e||{},n=n||{};return r.tmpl(t.url,r.fn.extend({appid:this.appid,mid:this.mid||"r",domain:["https:","//",n.domainq?this.domainq:this.domain].join("")},e))},setSession:function(t){this.sessionObj=t},_getSessionParam:function(){return r.fn.extend({pf:this.pf,pfkey:this.pfkey,from_h5:1,session_token:this.sessionToken,r:Math.random()},this.sessionObj.getSessionParam())},request:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=arguments[3];if(i=i||{},wx){o.fn.extend(e,{webversion:"midaswxapp_1.3.1"});try{i.disableLoading||wx.showToast({title:"支付中",icon:"loading",duration:5e3})}catch(t){}var r=!1,s={ret:-1};wx.request({url:t,method:i.method||"GET",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:e,success:function(t){r=!0;var e=void 0;t.statusCode>=200&&t.statusCode<=299&&(e=t.data),e||(e={ret:-9998,httpCode:t.statusCode,msg:"系统繁忙，请稍后再试！"}),s=e},fail:function(){r=!1,s={ret:-9999,msg:"请求超时！"}},complete:function(){try{i.disableLoading||wx.hideToast()}catch(t){}n(s)}})}}};for(var a in s.url)!function(t){s.prototype[t]=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(s.url[t]),o,n,i)}}(a);s.prototype.mobileGoodsInfo=function(t,e,n){t=t||{};var i={};r.fn.extend(i,this._getSessionParam()),r.fn.extend(i,t);var o=t.params;delete t.params,o&&/\/mobile_goods_info\?/.test(o)&&(o=o.replace(/\/[a-z_]+\?/,"/wechatapp_proc?"),this.request(this._getCgiUrl(s.url.mobileGoodsInfo,{params:o}),i,e,n))},s.prototype.mobileSaveGoods=function(t,e,n){t=t||{};var i={biz_appid:this.sessionObj.appid||""},o=(t._url,t._mid,t._params);delete t._url,delete t._mid,delete t._params,r.fn.extend(i,this._getSessionParam()),r.fn.extend(i,t),o&&/\/mobile_goods_info\?/.test(o)&&(o=o.replace(/\/[a-z_]+\?/,"/wechatapp_proc?"),this.request(this._getCgiUrl(s.url.mobileSaveGoods3,{params:o}),i,e,n))}},function(t,e,n){"use strict";var i=n(3),o=function(t){t=t||{},this.opt=t,this.interval=null};o.prototype.stop=function(t){0==t?clearTimeout(this.interval):1==t&&clearInterval(this.interval),this.interval=null},e.CountDown=function(t){if(t=t||{},o.call(this,t),!(t.time&&t.beforeCount&&t.counting&&t.countEnd))throw Error("can not use countDown");t.beforeCount();var e=t.time,n=function(){if(this.interval){if(t.counting(e),e<=0)return this.stop(1),void t.countEnd();e--}};n(),this.interval=setInterval(n.bind(this),1e3)},i.inherits(e.CountDown,o),e.Timeout=function(t){t=t||{},t.time=t.time||5,o.call(this,t),this.interval=setTimeout(function(){this.interval&&(this.stop(0),t.timeUp&&t.timeUp())}.bind(this),1e3*t.time)},i.inherits(e.Timeout,o)}]);